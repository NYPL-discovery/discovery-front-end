language: node_js
node_js:
- 10.17.0
install: npm rebuild node-sass && npm install
before_script: npm run dist
script: npm test
before_deploy: echo 'All unit tests passed; Successfull built distribution assets;
  Preparing to deploy Discovery Research Catalog to AWS.'
deploy:
- provider: elasticbeanstalk
  skip_cleanup: true
  access_key_id: "$AWS_ACCESS_KEY_ID_DEVELOPMENT"
  secret_access_key: "$AWS_SECRET_ACCESS_KEY_DEVELOPMENT"
  region: us-east-1
  app: discovery-ui
  env: discovery-ui-shep-development
  bucket_name: elasticbeanstalk-us-east-1-224280085904
  bucket_path: discovery-ui-development
  on:
    repo: NYPL/discovery-front-end
    branch: development
- provider: elasticbeanstalk
  skip_cleanup: false
  access_key_id: "$AWS_ACCESS_KEY_ID_QA"
  secret_access_key: "$AWS_SECRET_ACCESS_KEY_QA"
  region: us-east-1
  app: discovery-ui
  env: DiscoveryUi-production
  bucket_name: elasticbeanstalk-us-east-1-946183545209
  bucket_path: discovery-ui-shep
  on:
    repo: NYPL/discovery-front-end
    branch: production
- provider: elasticbeanstalk
  skip_cleanup: false
  access_key_id: "$AWS_ACCESS_KEY_ID_QA"
  secret_access_key: "$AWS_SECRET_ACCESS_KEY_QA"
  region: us-east-1
  app: discovery-ui
  env: DiscoveryUi-10-17-qa
  bucket_name: elasticbeanstalk-us-east-1-946183545209
  bucket_path: discovery-ui-shep
  on:
    repo: NYPL/discovery-front-end
    branch: qa
- provider: elasticbeanstalk
  skip_cleanup: false
  access_key_id: "$AWS_ACCESS_KEY_ID_QA"
  secret_access_key: "$AWS_SECRET_ACCESS_KEY_QA"
  region: us-east-1
  app: discovery-ui
  env: DiscoveryUi-edd-training
  bucket_name: elasticbeanstalk-us-east-1-946183545209
  bucket_path: discovery-ui-shep
  on:
    repo: NYPL/discovery-front-end
    branch: accounts
after_deploy: echo 'Successfully executed deploy trigger for Discovery Research Catalog
  on AWS'
env:
  global:
    secure: C1Dg4I2PncMKpOwMRsVI1I2mQ/PCtzVuNdCZCn0EnT8d3gIx6KLtI6Z04CYq2R9iOcizP7zUyY0volTWl/zZzgxsLjFk13GrhxhmXqmEHuw9IZerfg0l72SKy/eeqSyY1zD1TnzXnQyZ0MBzjq7KsvNcFJSB/5sN772vgMOet1vXuTNRfDwdUQgBa0dXaHZngsjflcy1LzMNSthsoVqQrDo4OPgchdwjt2/kSeRKz/wAGT09mc6f9Hx+5piUP7myOsPwMOj8UegrnvKlWEbZFdiHD0E7wVmrfFkP6DDd9rYkLJsykhTx3Ig/OGhLOg78mfaWFHhtbfOUa5Jh95hEyC6KiGFpwCN3kWsPKwDX7DCZzZRmafprB4lLIVeSR2oLpe+9cBG+rqvOnVntNecYLLGCp0ZDoomxsKyVxVHqFQoJLZSk6A4JtR4KFSCMBsVxglYjvGjtsa/4GZJ7GvnKa53qppWAQOQrSKLrR/pFdk6ow3OUIbGrYjnuEetERBDPNfKiVcdX1JyIBx31xwQPY+qMYPJ2Hncl9UZoAXT8mIPiNs2QvTSPx2DEgu3BoFpoQGXLMDenf4aR4Vpxl2Ut+2F3PgHAoGfUEdkyOA7hCZb4SmfkDTq5tGcqF/80yGYxAu48S7k532Oc3E8KjObjkWi52uWiifypVGrcuYelSV8=
